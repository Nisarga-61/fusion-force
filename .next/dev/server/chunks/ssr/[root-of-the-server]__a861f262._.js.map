{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/pixelgenesis/src/components/WalletConnector.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { ethers } from \"ethers\";\r\n\r\nexport default function WalletConnector({ onConnected }: { onConnected?: (account: string) => void }) {\r\n  const [account, setAccount] = useState<string>(\"\");\r\n  const [error, setError] = useState<string>(\"\");\r\n\r\n  const connect = async () => {\r\n    setError(\"\");\r\n    try {\r\n      if (!(window as any).ethereum) {\r\n        setError(\"MetaMask not found. Please install it.\");\r\n        return;\r\n      }\r\n      const provider = new ethers.BrowserProvider((window as any).ethereum);\r\n      const accounts = await provider.send(\"eth_requestAccounts\", []);\r\n      const acc = accounts[0];\r\n      setAccount(acc);\r\n      onConnected?.(acc);\r\n    } catch (e: any) {\r\n      setError(e?.message || \"Failed to connect wallet\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const eth = (window as any).ethereum;\r\n    if (!eth) return;\r\n    const handler = (accounts: string[]) => {\r\n      if (accounts?.[0]) setAccount(accounts[0]);\r\n    };\r\n    eth.on?.(\"accountsChanged\", handler);\r\n    return () => eth.removeListener?.(\"accountsChanged\", handler);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-2\">\r\n      {account ? (\r\n        <span className=\"text-sm text-zinc-600\">{account.slice(0, 6)}...{account.slice(-4)}</span>\r\n      ) : (\r\n        <button onClick={connect} className=\"rounded-md bg-black px-3 py-2 text-white hover:bg-zinc-800\">\r\n          Connect Wallet\r\n        </button>\r\n      )}\r\n      {error && <span className=\"text-xs text-red-600\">{error}</span>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS,gBAAgB,EAAE,WAAW,EAA+C;IAClG,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAS;IAC/C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS;IAE3C,MAAM,UAAU;QACd,SAAS;QACT,IAAI;YACF,IAAI,CAAC,AAAC,OAAe,QAAQ,EAAE;gBAC7B,SAAS;gBACT;YACF;YACA,MAAM,WAAW,IAAI,0LAAM,CAAC,eAAe,CAAC,AAAC,OAAe,QAAQ;YACpE,MAAM,WAAW,MAAM,SAAS,IAAI,CAAC,uBAAuB,EAAE;YAC9D,MAAM,MAAM,QAAQ,CAAC,EAAE;YACvB,WAAW;YACX,cAAc;QAChB,EAAE,OAAO,GAAQ;YACf,SAAS,GAAG,WAAW;QACzB;IACF;IAEA,IAAA,kNAAS,EAAC;QACR,MAAM,MAAM,AAAC,OAAe,QAAQ;QACpC,IAAI,CAAC,KAAK;QACV,MAAM,UAAU,CAAC;YACf,IAAI,UAAU,CAAC,EAAE,EAAE,WAAW,QAAQ,CAAC,EAAE;QAC3C;QACA,IAAI,EAAE,GAAG,mBAAmB;QAC5B,OAAO,IAAM,IAAI,cAAc,GAAG,mBAAmB;IACvD,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;;YACZ,wBACC,8OAAC;gBAAK,WAAU;;oBAAyB,QAAQ,KAAK,CAAC,GAAG;oBAAG;oBAAI,QAAQ,KAAK,CAAC,CAAC;;;;;;qCAEhF,8OAAC;gBAAO,SAAS;gBAAS,WAAU;0BAA6D;;;;;;YAIlG,uBAAS,8OAAC;gBAAK,WAAU;0BAAwB;;;;;;;;;;;;AAGxD","debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/pixelgenesis/src/store/useAppStore.ts"],"sourcesContent":["import { create } from \"zustand\";\r\n\r\nexport type DID = { id: string; document?: any };\r\nexport type StoredCredential = { id: string; type: string; issuer: string; issueDate: string; status: \"valid\" | \"revoked\" | \"pending\" };\r\n\r\ntype State = {\r\n  account?: string;\r\n  did?: DID;\r\n  credentials: StoredCredential[];\r\n  setAccount: (a?: string) => void;\r\n  setDID: (d?: DID) => void;\r\n  addCredential: (c: StoredCredential) => void;\r\n};\r\n\r\nexport const useAppStore = create<State>((set) => ({\r\n  account: undefined,\r\n  did: undefined,\r\n  credentials: [],\r\n  setAccount: (a) => set({ account: a }),\r\n  setDID: (d) => set({ did: d }),\r\n  addCredential: (c) => set((s) => ({ credentials: [c, ...s.credentials] })),\r\n}));\r\n"],"names":[],"mappings":";;;;AAAA;;AAcO,MAAM,cAAc,IAAA,kJAAM,EAAQ,CAAC,MAAQ,CAAC;QACjD,SAAS;QACT,KAAK;QACL,aAAa,EAAE;QACf,YAAY,CAAC,IAAM,IAAI;gBAAE,SAAS;YAAE;QACpC,QAAQ,CAAC,IAAM,IAAI;gBAAE,KAAK;YAAE;QAC5B,eAAe,CAAC,IAAM,IAAI,CAAC,IAAM,CAAC;oBAAE,aAAa;wBAAC;2BAAM,EAAE,WAAW;qBAAC;gBAAC,CAAC;IAC1E,CAAC","debugId":null}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/pixelgenesis/src/lib/web3.ts"],"sourcesContent":["import { ethers } from \"ethers\";\r\n\r\nexport const getBrowserProvider = () => {\r\n  if (typeof window === \"undefined\") return undefined;\r\n  const eth = (window as any).ethereum;\r\n  if (!eth) return undefined;\r\n  return new ethers.BrowserProvider(eth);\r\n};\r\n\r\nexport const getSigner = async () => {\r\n  const provider = getBrowserProvider();\r\n  if (!provider) throw new Error(\"No provider\");\r\n  return await provider.getSigner();\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAEO,MAAM,qBAAqB;IAChC,wCAAmC,OAAO;;;IAC1C,MAAM;AAGR;AAEO,MAAM,YAAY;IACvB,MAAM,WAAW;IACjB,IAAI,CAAC,UAAU,MAAM,IAAI,MAAM;IAC/B,OAAO,MAAM,SAAS,SAAS;AACjC","debugId":null}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/pixelgenesis/src/lib/abis.ts"],"sourcesContent":["export const DIDsAbi = [\r\n  { \"type\": \"function\", \"name\": \"createDID\", \"stateMutability\": \"nonpayable\", \"inputs\": [\r\n      {\"name\":\"user\",\"type\":\"address\"}, {\"name\":\"didHash\",\"type\":\"bytes32\"}\r\n    ], \"outputs\": [] },\r\n  { \"type\": \"function\", \"name\": \"resolveDID\", \"stateMutability\": \"view\", \"inputs\": [\r\n      {\"name\":\"user\",\"type\":\"address\"}\r\n    ], \"outputs\": [{\"name\":\"\",\"type\":\"bytes32\"}] },\r\n  { \"type\": \"function\", \"name\": \"updateDID\", \"stateMutability\": \"nonpayable\", \"inputs\": [\r\n      {\"name\":\"user\",\"type\":\"address\"}, {\"name\":\"newDidHash\",\"type\":\"bytes32\"}\r\n    ], \"outputs\": [] },\r\n  { \"type\": \"function\", \"name\": \"getDIDDocument\", \"stateMutability\": \"view\", \"inputs\": [\r\n      {\"name\":\"user\",\"type\":\"address\"}\r\n    ], \"outputs\": [{\"name\":\"\",\"type\":\"string\"}] }\r\n] as const;\r\n\r\nexport const CredentialRegistryAbi = [\r\n  {\"type\":\"function\",\"name\":\"issueCredential\",\"stateMutability\":\"nonpayable\",\"inputs\":[\r\n    {\"name\":\"holder\",\"type\":\"address\"}, {\"name\":\"credentialType\",\"type\":\"string\"}, {\"name\":\"ipfsHash\",\"type\":\"bytes32\"}, {\"name\":\"signature\",\"type\":\"bytes\"}\r\n  ],\"outputs\":[{\"name\":\"\",\"type\":\"bytes32\"}]},\r\n  {\"type\":\"function\",\"name\":\"verifyCredential\",\"stateMutability\":\"view\",\"inputs\":[{\"name\":\"credentialId\",\"type\":\"bytes32\"}],\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}]},\r\n  {\"type\":\"function\",\"name\":\"revokeCredential\",\"stateMutability\":\"nonpayable\",\"inputs\":[{\"name\":\"credentialId\",\"type\":\"bytes32\"}],\"outputs\":[]},\r\n  {\"type\":\"function\",\"name\":\"getCredentialStatus\",\"stateMutability\":\"view\",\"inputs\":[{\"name\":\"credentialId\",\"type\":\"bytes32\"}],\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}]}\r\n] as const;\r\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,UAAU;IACrB;QAAE,QAAQ;QAAY,QAAQ;QAAa,mBAAmB;QAAc,UAAU;YAClF;gBAAC,QAAO;gBAAO,QAAO;YAAS;YAAG;gBAAC,QAAO;gBAAU,QAAO;YAAS;SACrE;QAAE,WAAW,EAAE;IAAC;IACnB;QAAE,QAAQ;QAAY,QAAQ;QAAc,mBAAmB;QAAQ,UAAU;YAC7E;gBAAC,QAAO;gBAAO,QAAO;YAAS;SAChC;QAAE,WAAW;YAAC;gBAAC,QAAO;gBAAG,QAAO;YAAS;SAAE;IAAC;IAC/C;QAAE,QAAQ;QAAY,QAAQ;QAAa,mBAAmB;QAAc,UAAU;YAClF;gBAAC,QAAO;gBAAO,QAAO;YAAS;YAAG;gBAAC,QAAO;gBAAa,QAAO;YAAS;SACxE;QAAE,WAAW,EAAE;IAAC;IACnB;QAAE,QAAQ;QAAY,QAAQ;QAAkB,mBAAmB;QAAQ,UAAU;YACjF;gBAAC,QAAO;gBAAO,QAAO;YAAS;SAChC;QAAE,WAAW;YAAC;gBAAC,QAAO;gBAAG,QAAO;YAAQ;SAAE;IAAC;CAC/C;AAEM,MAAM,wBAAwB;IACnC;QAAC,QAAO;QAAW,QAAO;QAAkB,mBAAkB;QAAa,UAAS;YAClF;gBAAC,QAAO;gBAAS,QAAO;YAAS;YAAG;gBAAC,QAAO;gBAAiB,QAAO;YAAQ;YAAG;gBAAC,QAAO;gBAAW,QAAO;YAAS;YAAG;gBAAC,QAAO;gBAAY,QAAO;YAAO;SACxJ;QAAC,WAAU;YAAC;gBAAC,QAAO;gBAAG,QAAO;YAAS;SAAE;IAAA;IAC1C;QAAC,QAAO;QAAW,QAAO;QAAmB,mBAAkB;QAAO,UAAS;YAAC;gBAAC,QAAO;gBAAe,QAAO;YAAS;SAAE;QAAC,WAAU;YAAC;gBAAC,QAAO;gBAAG,QAAO;YAAM;SAAE;IAAA;IAC/J;QAAC,QAAO;QAAW,QAAO;QAAmB,mBAAkB;QAAa,UAAS;YAAC;gBAAC,QAAO;gBAAe,QAAO;YAAS;SAAE;QAAC,WAAU,EAAE;IAAA;IAC5I;QAAC,QAAO;QAAW,QAAO;QAAsB,mBAAkB;QAAO,UAAS;YAAC;gBAAC,QAAO;gBAAe,QAAO;YAAS;SAAE;QAAC,WAAU;YAAC;gBAAC,QAAO;gBAAG,QAAO;YAAM;SAAE;IAAA;CACnK","debugId":null}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/pixelgenesis/src/lib/addresses.ts"],"sourcesContent":["export const DIDS_ADDRESS = process.env.NEXT_PUBLIC_DIDS_ADDRESS || \"\";\r\nexport const CREDENTIAL_REGISTRY_ADDRESS = process.env.NEXT_PUBLIC_CREDENTIAL_REGISTRY_ADDRESS || \"\";\r\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,eAAe,wCAAwC;AAC7D,MAAM,8BAA8B,wCAAuD","debugId":null}},
    {"offset": {"line": 373, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Desktop/pixelgenesis/src/app/did/create/page.tsx"],"sourcesContent":["\"use client\";\r\nimport WalletConnector from \"@/components/WalletConnector\";\r\nimport { useAppStore } from \"@/store/useAppStore\";\r\nimport { ethers } from \"ethers\";\r\nimport { getBrowserProvider } from \"@/lib/web3\";\r\nimport { DIDsAbi } from \"@/lib/abis\";\r\nimport { DIDS_ADDRESS } from \"@/lib/addresses\";\r\n\r\nexport default function Page() {\r\n  const setDID = useAppStore((s) => s.setDID);\r\n\r\n  const onChainCreate = async () => {\r\n    const provider = getBrowserProvider();\r\n    if (!provider || !DIDS_ADDRESS) return false;\r\n    const signer = await provider.getSigner();\r\n    const account = await signer.getAddress();\r\n    const contract = new ethers.Contract(DIDS_ADDRESS, DIDsAbi as any, signer);\r\n    const didString = `did:pkh:eip155:80001:${account}`;\r\n    const didHash = ethers.keccak256(ethers.toUtf8Bytes(didString));\r\n    const tx = await contract.createDID(account, didHash);\r\n    await tx.wait();\r\n    setDID({ id: didString });\r\n    alert(`On-chain DID created for ${account}`);\r\n    return true;\r\n  };\r\n\r\n  const createDID = async () => {\r\n    try {\r\n      const ok = await onChainCreate();\r\n      if (ok) return;\r\n    } catch (e) {\r\n      console.warn(\"On-chain failed, falling back to stub\", e);\r\n    }\r\n    const res = await fetch(\"/api/did/create\", { method: \"POST\" });\r\n    const data = await res.json();\r\n    setDID({ id: data.did });\r\n    alert(`DID created: ${data.did}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"mx-auto max-w-3xl space-y-6 p-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-semibold\">Create DID</h1>\r\n        <WalletConnector />\r\n      </div>\r\n      <button onClick={createDID} className=\"rounded-md bg-black px-3 py-2 text-white\">Generate DID</button>\r\n      {!DIDS_ADDRESS && <p className=\"text-xs text-zinc-500\">Set NEXT_PUBLIC_DIDS_ADDRESS to enable on-chain creation.</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AANA;;;;;;;;AAQe,SAAS;IACtB,MAAM,SAAS,IAAA,0IAAW,EAAC,CAAC,IAAM,EAAE,MAAM;IAE1C,MAAM,gBAAgB;QACpB,MAAM,WAAW,IAAA,wIAAkB;QACnC,IAAI,CAAC,YAAY,CAAC,uIAAY,EAAE,OAAO;QACvC,MAAM,SAAS,MAAM,SAAS,SAAS;QACvC,MAAM,UAAU,MAAM,OAAO,UAAU;QACvC,MAAM,WAAW,IAAI,0LAAM,CAAC,QAAQ,CAAC,uIAAY,EAAE,6HAAO,EAAS;QACnE,MAAM,YAAY,CAAC,qBAAqB,EAAE,SAAS;QACnD,MAAM,UAAU,0LAAM,CAAC,SAAS,CAAC,0LAAM,CAAC,WAAW,CAAC;QACpD,MAAM,KAAK,MAAM,SAAS,SAAS,CAAC,SAAS;QAC7C,MAAM,GAAG,IAAI;QACb,OAAO;YAAE,IAAI;QAAU;QACvB,MAAM,CAAC,yBAAyB,EAAE,SAAS;QAC3C,OAAO;IACT;IAEA,MAAM,YAAY;QAChB,IAAI;YACF,MAAM,KAAK,MAAM;YACjB,IAAI,IAAI;QACV,EAAE,OAAO,GAAG;YACV,QAAQ,IAAI,CAAC,yCAAyC;QACxD;QACA,MAAM,MAAM,MAAM,MAAM,mBAAmB;YAAE,QAAQ;QAAO;QAC5D,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO;YAAE,IAAI,KAAK,GAAG;QAAC;QACtB,MAAM,CAAC,aAAa,EAAE,KAAK,GAAG,EAAE;IAClC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAyB;;;;;;kCACvC,8OAAC,gJAAe;;;;;;;;;;;0BAElB,8OAAC;gBAAO,SAAS;gBAAW,WAAU;0BAA2C;;;;;;YAChF,CAAC,uIAAY,kBAAI,8OAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;;AAG7D","debugId":null}}]
}